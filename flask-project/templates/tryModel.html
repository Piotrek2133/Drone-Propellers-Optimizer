<!DOCTYPE html>
<html>
<head>
    <title>Optimization</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Optimization</h1>
        <p>Click the button below to run the optimization for drone propeller parameters!</p>
        
        <button type="button" onclick="runOptimization()">Run Optimization</button>
        
        <div id="result"></div>
        
        <a href="/"><button>Home</button></a>
    </div>

    <script>
        async function runOptimization() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "<p>Running optimization... Please wait.</p>"; // Display a loading message

            try {
                const response = await fetch('/optimize', {
                    method: 'GET',
                });

                const result = await response.json();

                if (result.error) { 
                    resultDiv.innerHTML = `<p style="color:red;">Error: ${result.error}</p>`;
                } else {
                    resultDiv.innerHTML = `
                        <h2>Optimization Results</h2>
                        <p><strong>Optimal Parameters (c/R and Beta):</strong></p>
                        <pre>${JSON.stringify(result.optimal_parameters, null, 2)}</pre>
                        <p><strong>Predicted Efficiency:</strong> ${result.predicted_efficiency}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>
